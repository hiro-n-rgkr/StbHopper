---
id: ExportSTB
title: Export ST-Bridge file
---

Karamba のデータから ST-Bridge のデータを作成する方法を説明します。こちらの内容は Samples フォルダーの ExportSTB.gh のモデルを参照してください。

## データの変換

### Karamba モデルの変換

ああ

### 軸情報の作成

ああ

### 階情報の作成

ああ

### データの出力

ああ

## 変換の仕様

以下の仕様により ST-Brige データの作成を行います。

### 変換対象

- ST-Bridge version 1.4 の形式で出力します。
- 柱、梁、ブレースを変換し、床壁のような面材は変換しません

:::note

ST-Bridge version 2 の形式での出力には今後対応予定です。

:::

### 部材の判別

- Karamba のモデルでは、柱梁ブレースの区別がないため以下の仕様で判定しています
  - Karamba でトラス要素として扱っているものはブレースとして変換
  - 全体座標系の Z 軸に対しての部材の角度が45度未満である部材は柱、45度以上の場合は梁として変換
- 部材の判別は ST-Bridge における StbMember 内での各表現に対応します（例えば StbColumn など）
- STBの梁部材には、部材が基礎部材かのフラグ（isFoundation）があるが全て False で出力

### 材質の判別

- Karamba の 材料を作成する際に設定する Family の名前が "Steel" の場合は S 部材、"Concrete" の場合は RC 部材とします
- 材質の判別は ST-Bridge における StbSections 内での各表現に対応します（例えば StbSecColumn_RC など）

:::important

材料の Family 名が上記以外の場合エラーになります

:::

### 部材名称

- Karamba 内での名称は使用しません
- Karamba が内部的に持っている部材の順番で、柱ならば C、梁ならば G、ブレースならば V と数字の組み合わせで名称を付けます。（C1, G1 など）

### 断面名称

- Karamba の Cross Section コンポーネントの Name で設定した名称で断面を作成します

:::important

Name の設定ごとに STB ファイルに出力しているため、必ず Name を設定するようにしてください  
Name が重複している場合、HoaryFox のコンバーターでは同一断面として処理するため、1つの断面しか出力されません。

:::

### 断面形状

- Karamba で設定した断面の形状に合わせてSTBに出力します
- 変換にエラーがある時は、10mmの角材として出力します
- RC 断面は Karamba では配筋情報を持たないため以下で出力します
  - 主筋: 梁ならば 上端も下端も 3-D22、柱ならば 8-D22
  - せん断補強筋: 2-D10@100
- S 断面の場合、材質は フランジ、ウェブともに SN400 として出力します

:::note

非対応機能も要望があれば適宜対応しますので、Contact よりご連絡ください。

:::